<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Serverseitige Logik mit Servlets</title>

        <link rel="shortcut icon" href="../../favicon.svg" />
        <link rel="stylesheet" href="../../style.css" />
        <script src="../../learning-slides.bundle.js"></script>
    </head>
    <body class="slides invisible" data-title="Serverseitige Logik mit Servlets" tabindex="0">
        <header>
            <h2>Inhaltsverzeichnis</h2>
            <p>
                In diesem Kapitel bauen wir auf deinem Wissen zu HTTP und Java Server
                Pages auf und vervollst√§ndigen nun das Bild vom Server. Du erf√§hrst
                hier, wie der serverseitige Quellcode einer Webanwendung √ºberlicherweise
                gegliedert ist lernst die Programmierung in Java als konkretes Beispiel
                kennen. Mit diesem Wissen ausger√ºstet kannst du dich dann auch in
                vielen anderen Webframeworks schnell zurechtfinden.
            </p>
        </header>

        <section>
            <h1>Die drei Arten von Webanwendungen</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "webanwendungen-browser-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#webanwendungen-browser"
                                role          = "tab"
                                aria-controls = "webanwendungen-browser"
                                aria-expanded = "true"
                            >
                                Komplett im Browser
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "webanwendungen-server-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#webanwendungen-server"
                                role          = "tab"
                                aria-controls = "webanwendungen-server"
                            >
                                Komplett auf dem Server
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "webanwendungen-beides-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#webanwendungen-beides"
                                role          = "tab"
                                aria-controls = "webanwendungen-beides"
                            >
                                Sowohl als auch
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Komplett im Browser -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "webanwendungen-browser"
                            role            = "tabpanel"
                            aria-labelledby = "webanwendungen-browser-tab"
                        >
                            <img src="webanwendung_01.svg" class="d-block" style="width: 100%;" />

                            <p>
                                <small>
                                    <small>
                                        Bildnachweis f√ºr das Smartphone: <a href="https://pixabay.com/de/iphone-handy-apple-telefon-mobil-160307/" target="_blank">Pixabay: OpenClipart-Vectors</a>
                                    </small>
                                </small>
                            </p>

                            <ul>
                                <li>
                                    Die komplette Anwendungslogik befindet sich im Browser (JavaScript)
                                </li>
                                <li>
                                    Die Anwendung kann lokal komplett ohne Server ausgef√ºhrt werden
                                </li>
                                <li>
                                    Ein Server wird nur ben√∂tigt, wenn die Anwendung √ºber das Internet aufrufbar sein soll
                                </li>
                                <li>
                                    Mit <a href="http://cordova.apache.org/" target="_blank">Phonegap/Cordova</a> erstelle mobile Anwendungen funktionieren auch nach diesem Prinzip
                                </li>
                            </ul>
                            <p>
                                So haben wir bisher gearbeitet.
                            </p>
                        </div>
                        <!-- Komplett auf dem Server -->
                        <div
                            class           = "tab-pane fade"
                            id              = "webanwendungen-server"
                            role            = "tabpanel"
                            aria-labelledby = "webanwendungen-server-tab"
                        >
                            <img src="webanwendung_02.svg" class="d-block" style="width: 100%;" />

                            <ul>
                                <li>
                                    <b class="dhbw-lightblue">Der Klassiker:</b> Die Anwendungslogik liegt komplett auf dem Server
                                </li>
                                <li>
                                    JavaScript kommt im Browser wenn √ºberhaupt nur sehr sparsam zum Einsatz
                                </li>
                                <li>
                                    Stattdessen f√ºhrt jede Aktion dazu, dass eine neue Seite vom Server geladen wird
                                </li>
                                <li>
                                    Der Server f√ºhrt dabei die Anwendungslogik aus und generiert das anzuzeigende HTML
                                </li>
                            </ul>
                            <p>
                                Das schauen wir uns heute etwas genauer an.
                            </p>
                        </div>
                        <!-- Sowohl als auch -->
                        <div
                            class           = "tab-pane fade"
                            id              = "webanwendungen-beides"
                            role            = "tabpanel"
                            aria-labelledby = "webanwendungen-beides-tab"
                        >
                            <img src="webanwendung_03.svg" class="d-block" style="width: 100%;" />

                            <ul>
                                <li>
                                    <b class="dhbw-lightblue">Das Beste beider Welten:</b> Browser und Server beinhalten je einen Teil der Anwendungslogik
                                </li>
                                <li>
                                    Der HTML-Code der Seite kann zur Laufzeit generiert werden oder in einer einfachen HTML-Datei liegen
                                </li>
                                <li>
                                    Bei verschiedenen Aktionen werden mit JavaScript weitere Daten mit dem Server ausgetauscht
                                </li>
                                <li>
                                    Die empfangenen Daten werden dabei durch geschickte DOM-Manipulation sichtbar gemacht
                                </li>
                            </ul>
                            <p>
                                Das behandeln wir ein anderes mal.
                            </p>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Bevor wir nun anfangen k√∂nnen, den Server in unsere Webanwendungen miteinzubeziehen, musst du
                    erst verstehen, welche M√∂glichkeiten es hierf√ºr gibt. Denn davon h√§ngt ma√ügeblich ab, wie
                    die Webanwendungen aufgebaut sind und wie aufw√§ndig ihre Programmierung m√∂glicherweise wird.
                    Die zentrale Frage dabei ist einfach, welche Aufgabe der Server √ºberhaupt haben soll:
                </p>
                <ol>
                    <li>
                        Die Anwendung l√§uft im Browser und ben√∂tigt keinen Server
                    </li>
                    <li>
                        Die Anwendung wird komplett serverseitig realisiert
                    </li>
                    <li>
                        Die Anwendung l√§uft im Browser, greift aber auf einzelne Serverfunktionen zur√ºck
                    </li>
                </ol>
                <p>
                    Jeder dieser Ans√§tze hat seine ganz eigenen Vor- und Nachteile, weshalb es immer vom konkreten
                    Anwendungsfall abh√§ngt, welcher gerade am besten geeignet ist. Doch auch dann h√§ngt es immer
                    ein wenig von den eigenen Vorlieben ab, welcher Ansatz einem am leichtesten f√§llt. üêä
                </p>

                <h2>Browser Apps ohne Server</h2>
                <p>
                    Eigentlich waren Browser ja nur als einfache Anzeigeprogramme konzipiert, mit denen man eben
                    im Web surfen und HTML-Seiten anzeigen konnte. Doch sp√§testens seit HTML5 hat sich die Idee
                    durchgesetzt, den Browser als <a href="https://xkcd.com/1367/" target="_blank">vollwertige
                    Laufzeitumgebung f√ºr universelle Apps</a> zu nutzen. Viele Webanwendungen laufen daher, sobald
                    sie einmal geladen wurden, allein im Browser mit keinerlei Server im Hintergrund, weshalb dem
                    JavaScript-Code hier eine besondere Bedeutung zukommt. Dass dabei auch beeindruckende Ergebnisse
                    m√∂glich sind, zeigen folgende Beispiele:
                </p>
                <ul>
                    <li>
                        <a href="https://dx7.vstforx.de/" target="_blank">Yamaha DX7 Online-Emulation</a>
                    </li>
                    <li>
                        <a href="http://www.playmapscube.com/" target="_blank">Google Maps Cube</a>
                    </li>
                    <li>
                        <a href="http://www.ellison.rocks/clumsy-bird/" target="_blank">Clumsy Bird</a>
                    </li>
                </ul>
                <p>
                    Mit <a href="http://cordova.apache.org/" target="_blank">Phonegap bzw. Cordova</a> entwickelte
                    Mobile Apps üì± funktionieren √ºbrigens genauso. Es handelt sich dabei lediglich um HTML-, CSS- und
                    JavaScript-Dateien, die in einer Art Vollbildbrowser angezeigt werden.
                </p>

                <h2>Komplett serverseitige Webanwendungen</h2>
                <p>
                    Dies ist die klassische Art von Webanwendungen, wie es sie schon in den fr√ºhen Tagen des Webs gab,
                    als noch die Dinosaurier die Welt beherrschten. üê≤ Der Browser zeigt hier lediglich den HTML-Code
                    an, den er vom Server geschickt bekommt. Jeder Mausklick bzw. generell jede Aktion des Anwenders
                    f√ºhrt dazu, dass eine neue Seite geladen wird, weshalb browserseitig kein oder nur sehr wenig
                    JavaScript zum Einsatz kommt. Denn im Prinzip wird JavaScript hier auch gar nicht ben√∂tigt, da der
                    Browser bei jedem Klick auf einen Link oder beim Abschicken eines Formulars ohnehin ganz von alleine
                    eine neue Seite anfordert.
                </p>
                <p>
                    Der angezeigte HTML-Code wird in der Regel zur Laufzeit vom Server generiert. Jedes mal, wenn der
                    Browser eine Seite anfordert und hierf√ºr eine HTTP-Anfrage schickt, f√ºhrt der Server die gew√ºnschte
                    Aktion aus und erzeugt eine neue HTML-Seite, in der das Ergebnis dargestellt wird.
                </p>

                <h2>Der Server als Funktionsbibliothek</h2>
                <p>
                    Auch wenn viele Webframeworks noch aus der Welt der rein serverseitigen Webanwendungen stammen,
                    setzt sich heute immer mehr eine strikte Trennung zwischen dem Frontend und dem Backend einer
                    Webanwendung durch. üî™
                </p>
                <p>
                    Der Browser ist hierbei das Frontend und f√ºhrt eine Webseite bestehend aus
                    HTML, CSS und JavaScript-Code aus. Diese muss nat√ºrlich erst vom Server geladen werden, weshalb
                    manche Anwendungen den HTML-Code, wie bei einer herk√∂mmlichen Webanwendung, vom Server dynamisch
                    erzeugen lassen. Meistens wird darauf aber verzichtet, um Frontend und Backend unabh√§ngig voneinander
                    und h√§ufig auch in getrennten Teams entwickeln zu k√∂nnen.
                </p>
                <p>
                    Hauptaufgabe des Servers ist es in diesem Fall, Funktionen bereitzustellen, die der Browser
                    via JavaScript aufrufen kann (vgl. <a href="https://de.wikipedia.org/wiki/Ajax_(Programmierung)" target="_blank">
                    AJAX</a> und <a href="https://de.wikipedia.org/wiki/WebSocket" target="_blank">WebSockets</a>).
                    Das automatische Neuladen der Seite soll dabei m√∂glichst vermieden werden, weshalb du alle
                    Aufrufe in JavaScript selbst ausprogrammieren musst. Dabei musst du dann auch die empfangenen
                    Antwortdaten durch geschickte DOM-Manipulation in der Seite sichtbar machen.
                </p>
                <p>
                    Vorteil dieses Ansatzes ist, dass die serverseitigen Funktionen aus unterschiedlichen Frontends
                    heraus konsumiert werden k√∂nnen, beispielsweise einer Webseite und einer Desktopanwendung. Auch
                    kann eine so entwickelte Webanwendung l√§ngere Offlinezeiten √ºberstehen, solange sie keine Verbindung
                    zum Server ben√∂tigt. Hierf√ºr muss allerdings eine gute Schnittstelle zwischen Client und Server
                    definiert werden¬π, was nicht immer ganz einfach ist. N√§chstes Semester werden wir mit
                    <a href="https://de.wikipedia.org/wiki/SOAP" target="_blank">SOAP-</a> und
                    <a href="https://de.wikipedia.org/wiki/Representational_State_Transfer" target="_blank">REST</a>-Webservices
                    jedoch zwei weit verbreitete Techniken kennenlernen. üé≠
                </p>
                <p>
                    <small>
                        ¬π Welche Funktionen bietet der Server? Wie werden sie aufgerufen? Welche Daten m√ºssen dabei
                        an den Server √ºbertragen werden? Mit welchen Daten antwortet er? In welcher Reihenfolge sind
                        die Funktionen aufzurufen? Und so weiter ‚Ä¶
                    </small>
                </p>
            </aside>
        </section>

        <section>
            <h1>Was der Server bei einer Anfrage macht</h1>
            <article>
                <img src="struktur.svg" class="d-block" style="width: 100%; box-sizing: border-box; padding: 1em;" />
            </article>
            <aside>
                <p>
                    Die folgende Abbildung zeigt den typischen Ablauf, wie die meisten Webframeworks eingehende HTTP-Anfragen
                    auf dem Server bearbeiten. Nat√ºrlich besitzt jedes Framework etwas andere Begrifflichkeiten und auch die
                    Programmierung unterscheidet sich teilweise deutlich. Im Wesentlichen machen sie aber immer die folgenden
                    drei Dinge:
                </p>

                <h2>Wohin mit der Anfrage?</h2>
                <p>
                    Im ersten Schritt wird die in der Anfrage enthaltene URL ausgewertet. Dabei geht es vor allem darum
                    herauszufinden, welcher Teil der Webanwendung f√ºr die Anfrage zust√§ndig ist. Dieser Schritt wird daher
                    auch <b>Routing</b> genannt, da die Anfrage anhand ihrer URL serverintern an die richtige Stelle
                    weitergeleitet wird. Die meisten Frameworks erlauben es dementsprechend, Routingregeln f√ºr die URLs
                    zu definieren.
                </p>
                <p>
                    Ein einfaches Beispiel f√ºr einen Blog üìñ k√∂nnte dabei wie folgt aussehen:
                </p>
                <table style="margin-bottom: 1.5em;">
                    <tr>
                        <td>
                            <tt>/</tt>
                        </td>
                        <td>
                            ‚Üí
                        </td>
                        <td>
                            Startseite
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <tt>/article/</tt>
                        </td>
                        <td>
                            ‚Üí
                        </td>
                        <td>
                            √úbersicht mit allen Bloggeintr√§gen
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <tt>/article/<span style="color: darkred">${name}</span>/</tt>
                        </td>
                        <td>
                            ‚Üí
                        </td>
                        <td>
                            Inhalt eines einzelnen Bloggeintrags
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <tt>/article/<span style="color: darkred">${name}</span>/comments</tt>
                        </td>
                        <td>
                            ‚Üí
                        </td>
                        <td>
                            Kommentare zu einem bestimmten Bloggeintrag
                        </td>
                    </tr>
                </table>

                <h2>Der Request Handler ist dran</h2>
                <p>
                    Durch das Routing wird die Anfrage an einen sogenannten <b>Request Handler</b> weitergeleitet. Je
                    nach Programmiersprache und Framework handelt es sich dabei um eine Klasse, Methode oder eine Funktion,
                    in jedem Fall also um Programmcode, der zur Bearbeitung der Anfrage ausgef√ºhrt wird. Er bekommt alle
                    Daten der HTTP-Anfrage √ºbergegeben und kann auch eine Antwort generieren.
                </p>
                <p>
                    Hier liegt daher die Anwendungslogik des Servers, wo zum Beispiel Datens√§tze aus einer Datenbank gelesen
                    oder neue Eintr√§ge gespeichert werden k√∂nnen. üíæ
                </p>

                <h2>Erzeugung des HTML-Codes</h2>
                <p>
                    Nachdem die gew√ºnschte Aktion vom Request Handler ausgef√ºhrt wurde (zum Beispiel einen neuen Blogeintrag
                    speichern oder einen Eintrag aus der Datenbank lesen), wird die Anfrage in aller Regel
                    an ein <b>HTML-Template</b> weitergereicht, um daraus die anzuzeigende Seite zu generieren. Dabei kommt
                    dann wieder das Prinzip mit den Platzhaltern zum Tragen, wobei das Template verschiedene Platzhalter
                    enth√§lt, die vom Request Handler mit Inhalten ausgef√ºllt werden. Die hierf√ºr ben√∂tigten Daten werden deshalb
                    in einen sogenannten <b>Kontext</b> (eine Name/Wert-Liste) geschrieben, den das Template auslesen kann.
                </p>
                <p>
                    Alternativ kann der Request Handler auch einfach direkt eine HTTP-Antwort erzeugen, wenn zum Beispiel
                    ein Format wie PDF oder JSON als Antwort erwartet wird. In diesem Fall entf√§llt denn der zus√§tzliche
                    Schritt mit dem Template.
                </p>
            </aside>
        </section>

        <section>
            <h1>Und nun das Ganze mit Java</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "erstes_servlet-quellcode-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#erstes_servlet-quellcode"
                                role          = "tab"
                                aria-controls = "erstes_servlet-quellcode"
                                aria-expanded = "true"
                            >
                                Quellcode
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "erstes_servlet-netbeans-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#erstes_servlet-netbeans"
                                role          = "tab"
                                aria-controls = "erstes_servlet-netbeans"
                                aria-expanded = "true"
                            >
                                Netbeans-Projekt
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "erstes_servlet-ergebnis-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#erstes_servlet-ergebnis"
                                role          = "tab"
                                aria-controls = "erstes_servlet-ergebnis"
                            >
                                Ergebnis
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Quellcode -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "erstes_servlet-quellcode"
                            role            = "tabpanel"
                            aria-labelledby = "erstes_servlet-quellcode-tab"
                        >
                            <source-code language="java">
                                import java.io.IOException;
                                import java.io.PrintWriter;
                                import javax.servlet.ServletException;
                                import javax.servlet.annotation.WebServlet;
                                import javax.servlet.http.HttpServlet;
                                import javax.servlet.http.HttpServletRequest;
                                import javax.servlet.http.HttpServletResponse;

                                /**
                                 * Dies ist ein Minimalbeispiel f√ºr ein Servlet, das auf HTTP-Anfragen reagiert.
                                 */
                                @WebServlet(
                                    urlPatterns = {
                                        "/",
                                        "/hallo/*",
                                    }
                                )
                                public class MinimalesServlet extends HttpServlet {

                                    /**
                                     * Diese Methode reagiert auf GET-Anfragen.
                                     */
                                    @Override
                                    public void doGet(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        // Datenstrom f√ºr Ausgabe zum Client
                                        response.setContentType("text/html");
                                        PrintWriter toClient = response.getWriter();

                                        // HTML-Code erzeugen und ausgeben
                                        toClient.println("&lt;html&gt;");
                                        toClient.println("  &lt;body&gt;");
                                        toClient.println("    &lt;h1&gt;Hallo Servlet!&lt;/h1&gt;");
                                        toClient.println("  &lt;/body&gt;");
                                        toClient.println("&lt;/html&gt;");

                                        toClient.flush();
                                    }

                                }
                            </source-code>
                        </div>
                        <!-- Netbeans-Projekt -->
                        <div
                            class           = "tab-pane fade"
                            id              = "erstes_servlet-netbeans"
                            role            = "tabpanel"
                            aria-labelledby = "erstes_servlet-netbeans-tab"
                        >
                            <img src="minimales_servlet_netbeans.png" class="d-block" style="width: 100%;" />
                        </div>
                        <!-- Ergebnis -->
                        <div
                            class           = "tab-pane fade"
                            id              = "erstes_servlet-ergebnis"
                            role            = "tabpanel"
                            aria-labelledby = "erstes_servlet-ergebnis-tab"
                        >
                            <img src="minimales_servlet_ergebnis.png" class="d-block img-responsive" style="max-width: 100%;"/>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Wenn du den eben erkl√§rten Ablauf verstanden hast, ist der hier gezeigte Javacode nicht wirklich
                    schwer. Du musst dir nur folgende zwei Dinge merken:
                </p>
                <ol>
                    <li>
                        Request Handler in Java sind die sogenannten <b>Servlets</b>. Dabei handelt es sich um einfache
                        Klassen, die von <code>HttpServlet</code> erben.
                    </li>
                    <li>
                        Das URL-Routing wird entweder in der Datei <tt>WEB-INF/web.xml</tt> oder, wie hier gezeigt, √ºber
                        die Annotation <code>@WebServlet</code> vor den Servletklassen definiert.
                    </li>
                </ol>
                <p>
                    Mit diesem Wissen ausgestattet k√∂nnen wir uns den Quellcode nun genauer anschauen. √úbrigens handelt es sich hierbei
                    um eine vollst√§ndige, serverseitige Webanwendung, wie die beiden Screenshots auf der Folie zeigen.¬π üì∑
                </p>
                <p>
                    <small>
                        ¬π Die Ordner <tt>META-INF</tt> und <tt>WEB-INF</tt> generiert Netbeans automatisch. Du solltest sie auch nicht l√∂schen.
                    </small>
                </p>

                <h2>Das URL-Routing</h2>
                <p>
                    Vor der eigentlichen Serlvetklasse findest du im Quellcode die Annotation <code>@WebServlet</code>. Sie dient, wie Annotationen
                    in der Java Enterprise Edition allgemein, dazu die nachfolgende Klasse f√ºr einen bestimmten Anwendungsfall zu konfigurieren.
                    Hier in unserem Fall legt sie daher fest, unter welchen URLs das Servlet aufrufbar ist, indem dem Parameter <tt>urlPatterns</tt>
                    eine Liste¬≤ mit Suchmustern mitgegeben wird:
                </p>
                <source-code language="java">
                    @WebServlet(
                        urlPatterns = {
                            "/",
                            "/hallo/*",
                        }
                    )
                </source-code>
                <p>
                    Im Vergleich zu anderen Frameworks ist das URL-Routing von Java leider etwas simpel ausgefallen. Denn es werden nur sogenannte
                    Prefix-Regeln unterst√ºtzt, bei denen das Sternchen f√ºr eine beliebige Zeichenkette steht. Du wirst daher nicht drumherum kommen,
                    in bestimmten F√§llen die URL im Javacode noch weiter analysieren zu m√ºssen. Beispielsweise wenn du, wie im Blogbeispiel gezeigt,
                    die ID das gesuchten Blogeintrags ermitteln willst. Andere Frameworks bieten hier mehr M√∂glichkeiten.
                </p>
                <p>
                    Angenommen, dein Applikationsserver lauscht auf Port 8080 und deine Webanwendung hei√üt ‚Äûbeispiel_app‚Äù. Dann w√ºrden folgende
                    URLs zu einem Aufruf des Servlets f√ºhren:
                </p>
                <ul>
                    <li>
                        <tt>http://localhost:8080/beispiel_app/</tt>
                    </li>
                    <li>
                        <tt>http://localhost:8080/beispiel_app/hallo/</tt>
                    </li>
                    <li>
                        <tt>http://localhost:8080/beispiel_app/hallo/welt</tt>
                    </li>
                    <li>
                        <tt>http://localhost:8080/beispiel_app/hallo/dieter/</tt>
                    </li>
                    <li>
                        <tt>‚Ä¶</tt>
                    </li>
                </ul>
                <p>
                    Du siehst, Java stellt immer den Namen der Webanwendung vor die eigentliche URL. Das kommt daher, dass der Quellcode in einem
                    Webcontainer ausgef√ºhrt wird, der ja beliebig viele Webanwendungen beherbergen kann.
                </p>
                <p>
                    <small>
                        ¬≤ Verwechsle die geschweiften Klammern hier nicht mit JavaScript. Es handelt sich tats√§chlich um eine Liste und nicht um
                        ein Dictionary.
                    </small> ü§î
                </p>

                <h2>Die Servletklasse</h2>
                <p>
                    Das Servlet selbst ist eigentlich relativ einfach aufgebaut. Es handelt sich lediglich um eine
                    Javaklasse, die von <code>HttpServlet</code> erbt:
                </p>
                <source-code language="java">
                    public class MinimalesServlet extends HttpServlet {
                        ‚Ä¶
                    }
                </source-code>
                <p>
                    Dadurch besitzt sie je HTTP-Verb eine Methode, die bei einer entsprechenden Anfrage aufgerufen wird.
                    Hier im Beispiel wurde allerdings nur die <code>doGet(‚Ä¶)</code>-Methode √ºberschrieben, weshalb das Servlet
                    auch nur auf <tt>GET</tt>-Anfragen reagiert. Alle anderen Anfragen lehnt es mit dem Statuscode <tt>405 Method
                    Not Allowed</tt> ab. üö≠
                </p>
                <p>
                    Die <code>doGet(‚Ä¶)</code>-Methode hat dabei einen interessanten Aufbau. Zun√§chst einmal bekommt sie zwei
                    Parameter √ºbergeben, die jeweils f√ºr die HTTP-Anfrage und die HTTP-Antwort stehen. Au√üerdem kann sie die
                    beiden Exceptions <code>IOException</code> und <code>ServletException</code> werfen. Dar√ºber musst du dir
                    in der Regel aber keine Gedanken machen:
                </p>
                <source-code language="java">
                    @Override
                    public void doGet(
                        HttpServletRequest requqest,
                        HttpServletResponse respone
                    ) throws IOException, ServletException {
                        ‚Ä¶
                    }
                </source-code>
                <p>
                    Bevor nun eine Antwort generiert wird, wird erst das Header Field <tt>content-type</tt> gesetzt, um dem
                    Browser zu sagen, dass wir ihm HTML-Daten schicken:
                </p>
                <source-code language="java">
                    response.setContentType("text/html");
                </source-code>
                <p>
                    Anschlie√üend besorgt sich die Methode einen <code>PrintWriter</code>-Datenstrom und schreibt dort die
                    eigentliche Antwort hinein. Also alles das, was im Response Body zur√ºckgeschickt werden soll:
                </p>
                <source-code language="java">
                    PrintWriter toClient = response.getWriter();

                    toClient.println("&lt;html&gt;");
                    toClient.println("  &lt;body&gt;");
                    toClient.println("    &lt;h1&gt;Hallo Servlet!&lt;/h1&gt;");
                    toClient.println("  &lt;/body&gt;");
                    toClient.println("&lt;/html&gt;");

                    toClient.flush();
                </source-code>

                <h2>Wie geht es nun weiter?</h2>
                <p>
                    Nat√ºrlich ist das noch nicht wirklich sch√∂ner Quellcode. Denn wer will schon HTML-Seiten auf diese Weise
                    zusammenbauen? ü§§ In <a href="#8">Folie 8</a> zeigen wir dir daher, wie die Bearbeitung an eine Java Server
                    Page weitergegeben werden kann.
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(231, 221, 141)">
            <h1>Aufgabe 1: Dein erstes Servlet</h1>
            <article>
                <p>
                    Lege in Netbeans ein <a href="../http/#8" target="_blank">neues Java-Webprojekt</a> an und probiere folgende Sachen aus:
                </p>
                <ol>
                    <li>
                        L√∂sche die Datei <tt>index.html</tt> aus dem Ordner <tt>Web Pages.</tt>
                    </li>
                    <li>
                        Stattdessen lege eine neue Klasse an und kopiere den Quellcode aus <a href="#3">Folie 3</a> hinein.
                    </li>
                    <li>
                        Starte die Anwendung und rufe das Servlet im Browser auf. Es sollte die Meldung ‚ÄûHallo Servlet!‚Äù erscheinen.
                    </li>
                    <li>
                        Schreibe ein zweites Servlet, das auf die URL <tt>/bye/</tt> reagiert und ‚ÄûAuf Wiedersehen!‚Äù anzeigt.
                    </li>
                </ol>

                <img src="aufgabe1.png" class="d-block img-thumbnail" style="width: 100%;" />
            </article>
            <aside>
                <p>
                    Wir haben zwar noch nicht viel Quellcode gesehen, doch wollen wir
                    an dieser Stelle gleich mal ausprobieren, ob das mit den Servlets
                    wirklich so einfach funktioniert. Zeit also, Netbeans anzustarten. üèÅ
                </p>
                <img src="../../github_atom.png" class="img-fluid d-block"/>
                <p>
                    <small>
                        Bildnachweis:
                        <a href="https://atom.io/" target="_blank">Atom Webseite</a>
                    </small>
                </p>
            </aside>
        </section>

        <section>
            <h1>Die wichtigsten Servlet-Methoden</h1>
            <article>
                <h2>HttpServlet: Der Servlet selbst</h2>

                <div style="margin-bottom: 1em;">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "methoden-http_servlet-anfragen-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#methoden-http_servlet-anfragen"
                                role          = "tab"
                                aria-controls = "methoden-http_servlet-anfragen"
                                aria-expanded = "true"
                            >
                                Bearbeitung von HTTP-Anfragen
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "methoden-http_servlet-beispiel-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#methoden-http_servlet-beispiel"
                                role          = "tab"
                                aria-controls = "methoden-http_servlet-beispiel"
                            >
                                Beispiel
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Bearbeitung von HTTP-Anfragen -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "methoden-http_servlet-anfragen"
                            role            = "tabpanel"
                            aria-labelledby = "methoden-http_servlet-anfragen-tab"
                        >
                            <source-code language="java">
                                public void service(HttpServletRequest request, HttpServletResponse response)
                                throws IOException, ServletEcxeption
                            </source-code>
                            <p style="margin-top: -0.5em; margin-bottom: 1em;">
                                Diese Methode kannst du √ºberschreiben, wenn du wirklich auf alle HTTP-Anfragen reagieren willst,
                                egal welches Verb dabei verwendet wurde.
                            </p>

                            <source-code language="java">
                                public void doGet(HttpServletRequest request, HttpServletResponse response) ‚Ä¶
                                public void doPut(HttpServletRequest request, HttpServletResponse response) ‚Ä¶
                                public void doPost(HttpServletRequest request, HttpServletResponse response) ‚Ä¶
                                public void doDelete(HttpServletRequest request, HttpServletResponse response) ‚Ä¶
                            </source-code>
                            <p style="margin-top: -0.5em">
                                Meistens ist es jedoch besser, eine dieser Methoden zu √ºberschreiben. Denn dadurch kannst du gezielt
                                festlegen, wie sich das Servlet bei verschiedenen HTTP-Verben verhalten soll.
                            </p>
                        </div>
                        <!-- Beispiel -->
                        <div
                            class           = "tab-pane fade"
                            id              = "methoden-http_servlet-beispiel"
                            role            = "tabpanel"
                            aria-labelledby = "methoden-http_servlet-beispiel-tab"
                        >
                            <source-code language="java">
                                /**
                                 * Dieses Beispiel zeigt die Verwendung der verschiedenen doXXX-Methoden.
                                 */
                                @WebServlet(urlPatterns = {"/"})
                                public class GetPostServlet extends HttpServlet {

                                    /**
                                     * Wir haben eine GET-Anfrage empfangen.
                                     */
                                    @Override
                                    public void doGet(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        ‚Ä¶
                                    }

                                    /**
                                     * Wir haben eine POST-Anfrage empfangen.
                                     */
                                    @Override
                                    public void doPost(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        ‚Ä¶
                                    }

                                }
                            </source-code>
                        </div>
                    </div>
                </div>

                <h2>HttpServletRequest: Die HTTP-Anfrage</h2>

                <div style="margin-bottom: 1em;">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "methoden-http_servlet_request-anfrage-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#methoden-http_servlet_request-anfrage"
                                role          = "tab"
                                aria-controls = "methoden-http_servlet_request-anfrage"
                                aria-expanded = "true"
                            >
                                Werte aus der HTTP-Anfrage lesen
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "methoden-http_servlet_request-sonstige-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#methoden-http_servlet_request-sonstige"
                                role          = "tab"
                                aria-controls = "methoden-http_servlet_request-sonstige"
                            >
                                Sonstige Methoden
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "methoden-http_servlet_request-beispiel-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#methoden-http_servlet_request-beispiel"
                                role          = "tab"
                                aria-controls = "methoden-http_servlet_request-beispiel"
                            >
                                Beispiel
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "methoden-http_servlet_request-screenshot-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#methoden-http_servlet_request-screenshot"
                                role          = "tab"
                                aria-controls = "methoden-http_servlet_request-screenshot"
                            >
                                Screenshot
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Werte aus der HTTP-Anfrage lesen -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "methoden-http_servlet_request-anfrage"
                            role            = "tabpanel"
                            aria-labelledby = "methoden-http_servlet_request-anfrage-tab"
                        >
                            <source-code language="java">
                                public String getRequestURI()
                            </source-code>
                            <p style="margin-top: -0.5em; margin-bottom: 1em;">
                                Liefert den Pfad der URL, so wie er in der HTTP-Anfrage geschickt wurde. Der String
                                beinhaltet daher auch den Namen der Webanwendung, mit dem ja jeder URL beginnt (siehe
                                Screenshot).
                            </p>

                            <source-code language="java">
                                public String getQueryString()
                            </source-code>
                            <p style="margin-top: -0.5em; margin-bottom: 1em;">
                                Liefert die Anfrageparameter aus der URL oder <code>null</code>, falls die URL keine
                                Anfrageparameter enth√§lt.
                            </p>

                            <source-code language="java">
                                public String getParameter(String name)
                            </source-code>
                            <p style="margin-top: -0.5em; margin-bottom: 1em;">
                                Liefert den Wert eines einzelnen Anfrageparameters aus der URL. Alternativ kann damit auch der
                                Wert eines Formularfelds ausgelesen werden, wenn ein HTML-Formular abgeschickt wurde.
                            </p>

                            <source-code language="java">
                                public String getHeader(String name)
                            </source-code>
                            <p style="margin-top: -0.5em">
                                Liefert den Wert eines einzelnen Header Fields aus der HTTP-Anfrage oder <code>null</code>,
                                wenn es das Feld nicht gibt.
                            </p>
                        </div>
                        <!-- Sonstige Methoden -->
                        <div
                            class           = "tab-pane fade show"
                            id              = "methoden-http_servlet_request-sonstige"
                            role            = "tabpanel"
                            aria-labelledby = "methoden-http_servlet_request-sonstige-tab"
                        >
                            <source-code language="java">
                                public HttpSession getSession()
                            </source-code>
                            <p style="margin-top: -0.5em; margin-bottom: 1em;">
                                Liefert den sogenannten <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html"
                                target="_blank">Session Kontext</a> zur√ºck. Diesen kannst du als Notizblock nutzen üóíÔ∏è, um dir √ºber eine
                                Anfrage hinaus benutzerspezifische Werte zu merken.
                            </p>

                            <source-code language="java">
                                public RequestDispatcher getRequestDispatcher(String URL)
                            </source-code>
                            <p style="margin-top: -0.5em">
                                Dieses Monster ben√∂tigen wir sp√§ter, um die Bearbeitung einer HTTP-Anfrage an eine Java Server Page
                                weiterzugeben. üëæ
                            </p>
                        </div>
                        <!-- Beispiel -->
                        <div
                            class           = "tab-pane fade"
                            id              = "methoden-http_servlet_request-beispiel"
                            role            = "tabpanel"
                            aria-labelledby = "methoden-http_servlet_request-beispiel-tab"
                        >
                            <source-code language="java">
                                /**
                                 * Dieses Beispiel zeigt den Aufruf einiger wichtiger Methoden
                                 * von HttpServletRequest.
                                 */
                                @WebServlet(urlPatterns = {"/"})
                                public class RequestMethodenServlet extends HttpServlet {

                                    /**
                                     * Wir haben eine GET-Anfrage empfangen.
                                     */
                                    @Override
                                    public void doGet(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        // Informationen aus der HTTP-Anfrage auslesen
                                        String uri = request.getRequestURI();
                                        String query = request.getQueryString();
                                        String vornameParameter = request.getParameter("vorname");
                                        String userAgent = request.getHeader("user-agent");

                                        // Antwort senden
                                        response.setContentType("text/plain");
                                        PrintWriter toClient = response.getWriter();

                                        toClient.println("Folgende Anfrage hast du geschickt");
                                        toClient.println("==================================");
                                        toClient.println("");
                                        toClient.println("URL: " + uri);
                                        toClient.println("Query String: " + query);
                                        toClient.println("Parameter vorname: " + vornameParameter);
                                        toClient.println("User Agent: " + userAgent);

                                        toClient.flush();
                                    }

                                }
                            </source-code>
                        </div>
                        <!-- Screenshot -->
                        <div
                            class           = "tab-pane fade"
                            id              = "methoden-http_servlet_request-screenshot"
                            role            = "tabpanel"
                            aria-labelledby = "methoden-http_servlet_request-screenshot-tab"
                        >
                            <img src="servlet_request_methoden.png" class="d-block" style="width: 100%" />
                        </div>
                    </div>
                </div>

                <h2>HttpServletResponse: Die HTTP-Antwort</h2>

                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "methoden-http_servlet_response-antwort-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#methoden-http_servlet_response-antwort"
                                role          = "tab"
                                aria-controls = "methoden-http_servlet_response-antwort"
                                aria-expanded = "true"
                            >
                                Werte in die Antwort schreiben
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "methoden-http_servlet_response-beispiel-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#methoden-http_servlet_response-beispiel"
                                role          = "tab"
                                aria-controls = "methoden-http_servlet_response-beispiel"
                            >
                                Beispiel
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Werte in die Antwort schreiben -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "methoden-http_servlet_response-antwort"
                            role            = "tabpanel"
                            aria-labelledby = "methoden-http_servlet_response-antwort-tab"
                        >
                            <source-code language="java">
                                public void setStatus(int code)
                                public void sendError(int code)
                            </source-code>
                            <p style="margin-top: -0.5em; margin-bottom: 1em;">
                                Setzt den Statuscode der HTTP-Antwort. F√ºr jeden Statuscode gibt eine entsprechende Konstante,
                                zum Beispiel <code>response.SC_NOT_FOUND</code>. Im Gegensatz zu <code>setStatus()</code> schickt
                                <code>sendError()</code> die Antwort mit einer Standardfehlerseite sofort ab.
                            </p>

                            <source-code language="java">
                                public void sendRedirect(String url)
                            </source-code>
                            <p style="margin-top: -0.5em; margin-bottom: 1em;">
                                Sendet den Stautscode <tt>302 Redirect</tt> an den Browser und fordert ihn damit auf,
                                eine neue Seite zu laden.
                            </p>

                            <source-code language="java">
                                void setContentType(String type)
                            </source-code>
                            <p style="margin-top: -0.5em; margin-bottom: 1em;">
                                Setzt das Header Field <tt>content-type</tt>, um dem Browser mitzuteilen, welches
                                Format die zur√ºckgelieferten Daten haben. Der Wert <tt>type</tt> muss einem g√ºltigen
                                <a href="https://en.wikipedia.org/wiki/Media_type" target="_blank">MIME-Type</a> entsprechen.
                            </p>

                            <source-code language="java">
                                public PrintWriter getWriter()
                            </source-code>
                            <p style="margin-top: -0.5em">
                                Liefert einen <code>PrintWriter</code> zur√ºck, mit dem der Response Body geschrieben werden kann.
                                <b>Wichtig:</b> Sobald du anf√§ngst, etwas in den Datenstrom zu schreiben, kannst du keine anderen
                                Methoden von <code>HttpServletResponse</code> mehr aufrufen, da dadurch der Response Header
                                abgeschlossen wird.
                            </p>
                        </div>
                        <!-- Beispiel -->
                        <div
                            class           = "tab-pane fade"
                            id              = "methoden-http_servlet_response-beispiel"
                            role            = "tabpanel"
                            aria-labelledby = "methoden-http_servlet_response-beispiel-tab"
                        >
                            <source-code language="java">
                                /**
                                 * Dieses Beispiel leitet den Aufrufer immer an Google weiter.
                                 */
                                @WebServlet(urlPatterns = {"/"})
                                public class RedirectServlet extends HttpServlet {

                                    /**
                                     * Wir haben eine GET-Anfrage empfangen.
                                     */
                                    @Override
                                    public void doGet(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        response.sendRedirect("https://www.google.de");
                                    }

                                }
                            </source-code>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Auf dieser Folie findest du eine √úbersicht der wichtigsten Methoden rund um Servlets.
                    Nat√ºrlich ist die √úbersicht nicht vollst√§ndig, es sind aber alle wesentlichen Methoden
                    dabei, die man so im Alltag ben√∂tigt. üê™ Diese teilen sich dabei auf die folgenden
                    Klassen bzw. Interfaces auf:
                </p>
                <ul>
                    <li>
                        <b><tt>HttpServlet</tt>:</b> Das jeweilige Servlet selbst. Diese Methoden
                        kannst du √ºberschreiben und mit eigenem Inhalt f√ºllen.
                    </li>
                    <li>
                        <b><tt>HttpServletRequest</tt>:</b> Alles rund um die HTTP-Anfrage.
                    </li>
                    <li>
                        <b><tt>HttpServletResponse</tt>:</b> Alles rund um die HTTP-Antwort.
                    </li>
                </ul>
                <p>
                    Alle weiteren Methoden kannst du ja bei Bedarf in der
                    <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/package-summary.html" target="_blank">API-Dokumentation</a>
                    nachschlagen. üìö
                </p>
            </aside>
        </section>

        <section>
            <h1>Beispiel: Formulareingaben verarbeiten</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "formular-quellcode-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#formular-quellcode"
                                role          = "tab"
                                aria-controls = "formular-quellcode"
                                aria-expanded = "true"
                            >
                                Quellcode
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "formular-vorschau1-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#formular-vorschau1"
                                role          = "tab"
                                aria-controls = "formular-vorschau1"
                            >
                                Der erste Aufruf
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "formular-vorschau1-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#formular-vorschau2"
                                role          = "tab"
                                aria-controls = "formular-vorschau2"
                            >
                                Nachdem das Formular abgeschickt wurde
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Quellcode -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "formular-quellcode"
                            role            = "tabpanel"
                            aria-labelledby = "formular-quellcode-tab"
                        >
                            <source-code language="java">
                                import java.io.IOException;
                                import java.io.PrintWriter;
                                import javax.servlet.ServletException;
                                import javax.servlet.annotation.WebServlet;
                                import javax.servlet.http.HttpServlet;
                                import javax.servlet.http.HttpServletRequest;
                                import javax.servlet.http.HttpServletResponse;
                                import javax.servlet.http.HttpSession;

                                /**
                                 * Dieses Servlet zeigt, wie du Formulareingaben richtig behandelt werden.
                                 * Es zeigt, dass bei einer GET-Anfrage das Formular geschickt wird und
                                 * dieses seine Daten per POST an den Server schickt. Bei einer POST-Anfrage
                                 * m√ºssen daher die Formulardaten ausgelesen und verarbeitet werden, woraufhin
                                 * der Browser durch einen Redirect zum Neuladen der Seite gezwungen wird.
                                 */
                                @WebServlet(urlPatterns = {"/formular/"})
                                public class FormularServlet extends HttpServlet{

                                    /**
                                     * GET-Anfrage: Liefert eine HTML-Seite mit einem Formular
                                     */
                                    @Override
                                    public void doGet(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        // Anfang der HTML-Seite
                                        response.setContentType("text/html");
                                        response.setCharacterEncoding("utf-8");

                                        PrintWriter toClient = response.getWriter();

                                        toClient.println("&lt;!DOCTYPE html&gt;");
                                        toClient.println("&lt;html&gt;");
                                        toClient.println("    &lt;head&gt;");
                                        toClient.println("        &lt;meta charset='utf-8' /&gt;");
                                        toClient.println("        &lt;title&gt;Hallo-Welt-Formular&lt;/title&gt;");
                                        toClient.println("    &lt;/head&gt;");
                                        toClient.println("    &lt;body&gt;");

                                        // Hier nun das eigentliche Formular
                                        toClient.println("        &lt;form method='POST'&gt;");
                                        toClient.println("            Wie hei√üt du?");
                                        toClient.println("            &lt;input name='vorname' type='text' /&gt;");
                                        toClient.println("            &lt;input type='submit' value='Abschicken' /&gt;");
                                        toClient.println("        &lt;/form&gt;");

                                        // Zuletzt eingegebener Vorname, falls vorhanden
                                        // Der Wert wird in der doPost()-Methode im Session Kontext abgelegt
                                        HttpSession session = request.getSession();
                                        String vorname = (String) session.getAttribute("vorname");

                                        if (vorname != null) {
                                            toClient.println("        &lt;p&gt;");
                                            toClient.println("            Hallo, " + vorname + "!");
                                            toClient.println("        &lt;/p&gt;");
                                        }

                                        // Abschluss der Seite
                                        toClient.println("    &lt;/body&gt;");
                                        toClient.println("&lt;/html&gt;");

                                        toClient.flush();
                                    }

                                    /**
                                     * POST-Anfrage: Verarbeitet die Formulareingaben und zwingt den Browser
                                     * danach, die Seite neuzuladen.
                                     */
                                    @Override
                                    public void doPost(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        // Eingebenen Vornamen auslesen
                                        String vorname = request.getParameter("vorname");

                                        // Vornamen im Session Kontext speichern
                                        HttpSession session = request.getSession();
                                        session.setAttribute("vorname", vorname);

                                        // Browser zwingen, die Seite mit einem GET neuzuladen
                                        response.sendRedirect(request.getRequestURI());
                                    }

                                }
                            </source-code>
                        </div>
                        <!-- Der erste Aufruf -->
                        <div
                            class           = "tab-pane fade"
                            id              = "formular-vorschau1"
                            role            = "tabpanel"
                            aria-labelledby = "formular-vorschau1-tab"
                        >
                            <p>
                                Der HTML-Code aus Sicht des Browsers nach dem ersten Aufruf. In den Entwicklerwerkzeugen
                                wurde nur eine <tt>GET</tt>-Anfrage aufgezeichnet.
                            </p>

                            <img src="formular_01.png" class="d-block img-responsive" style="margin-bottom: 1em;" />

                            <source-code language="html">
                                &lt;!DOCTYPE html&gt;
                                &lt;html&gt;
                                    &lt;head&gt;
                                        &lt;meta charset='utf-8' /&gt;
                                        &lt;title&gt;Hallo-Welt-Formular&lt;/title&gt;
                                    &lt;/head&gt;
                                    &lt;body&gt;
                                        &lt;form method='POST'&gt;
                                            Wie hei√üt du?
                                            &lt;input name='vorname' type='text' /&gt;
                                            &lt;input type='submit' value='Abschicken' /&gt;
                                        &lt;/form&gt;
                                    &lt;/body&gt;
                                &lt;/html&gt;
                            </source-code>
                        </div>
                        <!-- Nachdem das Formular abgeschickt wurde -->
                        <div
                            class           = "tab-pane fade"
                            id              = "formular-vorschau2"
                            role            = "tabpanel"
                            aria-labelledby = "formular-vorschau2-tab"
                        >
                            <p>
                                Der neue HTML-Code aus Sicht des Browsers. In den Entwicklerwerkzeugen sieht man sch√∂n,
                                wie erst ein <tt>POST</tt> und dann ein <tt>GET</tt> an den Server gesendet wird.
                            </p>

                            <img src="formular_02.png" class="d-block img-responsive" style="margin-bottom: 1em;" />

                            <source-code language="html">
                                &lt;!DOCTYPE html&gt;
                                &lt;html&gt;
                                    &lt;head&gt;
                                        &lt;meta charset='utf-8' /&gt;
                                        &lt;title&gt;Hallo-Welt-Formular&lt;/title&gt;
                                    &lt;/head&gt;
                                    &lt;body&gt;
                                        &lt;form method='POST'&gt;
                                            Wie hei√üt du?
                                            &lt;input name='vorname' type='text' /&gt;
                                            &lt;input type='submit' value='Abschicken' /&gt;
                                        &lt;/form&gt;
                                        &lt;p&gt;
                                            Hallo, Alf!
                                        &lt;/p&gt;
                                    &lt;/body&gt;
                                &lt;/html&gt;
                            </source-code>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Erinnerst du dich noch an das <a href="../../3-javascript/dom/#8" target="_blank">Kontaktformular</a> aus dem JavaScript
                    DOM-Kapitel? üì∞ Hier zeigen wir dir, wie Browser und Server in modernen Webanwendungen zusammenspielen, um die Inhalte
                    eines Formulars auszuwerten. Im Prinzip passiert dabei folgendes:
                </p>
                <ol>
                    <li>
                        Der Browser sendet eine <tt>GET</tt>-Anfrage und bekommt daraufhin eine HTML-Seite mit einem Formular.
                    </li>
                    <li>
                        Wird das Formular abgeschickt, sendet der Browser eine <tt>POST</tt>-Anfrage mit den eingebenen Werten an den Server.
                    </li>
                    <li>
                        Der Server verarbeitet die Eingaben und best√§tigt dies mit <tt>302 Redirect</tt>.
                    </li>
                    <li>
                        Als Folge daraus l√§dt der Browser die Seite mit einer weiteren <tt>GET</tt>-Anfrage neu.
                    </li>
                </ol>
                <p>
                    Dieses Vorgehen wird manchmal <a href="https://en.wikipedia.org/wiki/Post/Redirect/Get" target="_blank">Post-Redirect-Get</a>
                    genannt, nach dem Ablauf, was beim Abschicken des Formulars passiert. Um dies in Java nachzubauen brauchen wir daher ein
                    ein Servlet, das sowohl auf <tt>GET</tt> als auch <tt>POST</tt> reagiert:
                </p>
                <source-code language="java">
                    public class FormularServlet extends HttpServlet {
                        @Override
                        public void doGet(‚Ä¶) {
                            ‚Ä¶
                        }

                        @Override
                        public void doPost(‚Ä¶) {
                            ‚Ä¶
                        }
                    }
                </source-code>

                <h2>Der erste Aufruf der Seite</h2>
                <p>
                    In der <code>doGet()</code>-Methode senden wir eine einfache HTML-Seite mit einem kleinen Formular an den Browser.
                    Der Code ist zugegeben nicht sehr sch√∂n. Aber noch wissen wir nicht, wie wir das HTML in eine Java Server Page
                    auslagern k√∂nnen. üòï
                </p>
                <source-code language="java">
                    // Hier nun das eigentliche Formular
                    toClient.println("  &lt;form method='POST'&gt;");
                    toClient.println("    Wie hei√üt du?");
                    toClient.println("    &lt;input name='vorname' type='text' /&gt;");
                    toClient.println("    &lt;input type='submit' value='Abschicken' /&gt;");
                    toClient.println("  &lt;/form&gt;");
                </source-code>
                <p>
                    Wie du siehst, besitzt das Formular das Attribut <src-code language="html">method='POST'</src-code>. Dadurch
                    wird sichergestellt, dass beim Abschicken des Formulars eine <tt>POST</tt>-Anfrage geschickt wird. Und zwar
                    an dieselbe URL, wie die Seite selbst, da dem Formular kein <code>action</code>-Attribut mir einer anderen
                    URL mitgegeben wurde. üö£üèº
                </p>

                <h2>Post/Redirect/Get</h2>
                <p>
                    Die Verarbeitung der Formulareingaben erfolgt in <code>doPost()</code>. Zun√§chst wird dabei der eingegebene
                    Vorname aus den Formulardaten ausgelesen.
                </p>
                <source-code language="java">
                    String vorname = request.getParameter("vorname");
                </source-code>
                <p>
                    Eigentlich m√ºsste man hier noch pr√ºfen, ob der zur√ºckgelieferte Wert ungleich <code>null</code> und ggf.
                    auch ungleich einem leeren String ist. Darauf verzichten wir hier jetzt aber. Anschlie√üend wird der Wert
                    im Session Kontext abgelegt, so dass er auch bei sp√§teren Anfragen noch verf√ºgbar ist.
                </p>
                <source-code language="java">
                    HttpSession session = request.getSession();
                    session.setAttribute("vorname", vorname);
                </source-code>
                <p>
                    Das war's auch schon mit dem Verarbeiten der Eingaben. Zum Schluss wird der Browser daher zum Neuladen der
                    Seite aufgefordert. Hierf√ºr muss die Anfrage mit dem Statuscode <tt>302 Redirect</tt> beantwortet werden,
                    wobei die aufzurufende URL im Header Field <tt>Location</tt> steht. Als kleine Abk√ºrzung bietet uns Java
                    hierf√ºr die <code>sendRedirect()</code>-Methode:
                </p>
                <source-code language="html">
                    response.sendRedirect(request.getRequestURI());
                </source-code>
                <p>
                    Nat√ºrlich ist es kein Muss, den Anwender wieder auf dieselbe Seite zu f√ºhren. H√§ufig beinhaltet das Formular
                    stattdessen ein <src-code language="html">&lt;input type="hidden" value="‚Ä¶"&gt;</src-code> mit der neuen
                    Zieladresse. In unserem Fall machen wir das jedoch nicht und verwenden als Zieladresse einfach die aktuelle
                    URL der Seite. Der Server f√ºhrt deshalb nochmal die <code>doGet()</code>-Methode aus, findet dann im Session
                    Kontext allerdings den zuvor dort abgelegten Wert. Folgende <code>if</code>-Abfrage trifft daher dann zu:
                </p>
                <source-code language="java">
                    HttpSession session = request.getSession();
                    String vorname = (String) session.getAttribute("vorname");

                    if (vorname != null) {
                        toClient.println("  &lt;p&gt;");
                        toClient.println("    Hallo, " + vorname + "!");
                        toClient.println("  &lt;/p&gt;");
                    }
                </source-code>
                <p>
                    Dadurch wird dann beim zweiten Durchlauf der zuvor eingegebene Name angezeigt. üëãüèΩ
                </p>

                <h2>√úberpr√ºfung der Formulareingaben</h2>
                <p>
                    Was wir hier jetzt nicht gezeigt haben, ist wie der Server die Formulareingaben
                    √ºberpr√ºfen kann. Das Vorgehen dabei w√§re aber ungef√§hr folgendes:
                </p>
                <p>
                    Zun√§chst einmal solltest du die Eingaben, <a href="../../3-javascript/dom/#8" target="_blank">
                    wie im JavaScript/DOM-Kapitel gezeigt</a>, zun√§chst clientseitig √ºberpr√ºfen. Werden dabei fehlende
                    oder falsche Eingaben entdeckt, wird das Formular nicht abgeschickt.
                </p>
                <p>
                    Anschlie√üend f√ºhrt der Server in <code>doPost()</code> seine eigenen Pr√ºfungen durch. Dabei darf
                    sich der Server unter keinen Umst√§nden darauf verlassen, in irgend einer Form valide Daten vom
                    Browser empfangen zu haben. ‚ÄûDon't Trust The Client‚Äù lautet das Motto hier. Es m√ºssen also alle
                    Pr√ºfungen hier erneut durchgef√ºhrt werden. ‚ùï
                </p>
                <p>
                    Sind die Eingaben okay, leitet der Server den Anwender auf die neue Zieladresse weiter. Sind die
                    Eingaben nicht okay, leitet der Server den Anwender stattdessen auf Seite mit dem Formular zur√ºck.
                    S√§mtliche Formulareingaben m√ºssen dabei mit dem <code>value</code>-Attribut in das HTML √ºbernommen
                    werden, damit sie nicht verloren gehen. Zum Beispiel so:
                </p>
                <source-code language="html">
                    &lt;input name="kundenname" type="Text" value="Klaus Kunde" /&gt;
                </source-code>
                <p>
                    Zus√§tzlich sollte nat√ºrlich eine aussagekr√§ftige Fehlermeldung angezeigt werden.
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(231, 221, 141)">
            <h1>Aufgabe 2: Ein kleines Servlet-Quiz</h1>
            <article>
                <h2>Aufgabe 1.1: Grundlagen</h2>

                <p>
                    1. Wie werden Request Handler in Java allgemein genannt?
                </p>
                <ol>
                    <li>
                        HTTP Handler
                    </li>
                    <li>
                        Java Server Pages
                    </li>
                    <li>
                        Servlets
                    </li>
                </ol>

                <p>
                    2. Auf welche zwei Arten kann das URL-Routing in Java definiert werden?
                </p>
                <ol>
                    <li>
                        Mit der Annotation <code>@WebServlet</code>
                    </li>
                    <li>
                        Mit der Annotation <code>@UrlPatterns</code>
                    </li>
                    <li>
                        Im Konstruktor eines Servlets
                    </li>
                    <li>
                        In der Datei <tt>WEB-INF/web.xml</tt>
                    </li>
                </ol>

                <p>
                    3. Welchen Zweck erf√ºllen die Request Handler einer Webanwendung?
                </p>
                <ol>
                    <li>
                        Sie implementieren verschiedene Protokolle wie SFTP oder IMAP
                    </li>
                    <li>
                        Sie nehmen HTTP-Anfragen entgegen und erzeugen eine HTTP-Antwort
                    </li>
                    <li>
                        Sie verarbeiten die vom Server empfangene Daten mit JavaScript
                    </li>
                </ol>

                <p>
                    4. Welchen Zweck erf√ºllen Templates in einer Webanwendung
                </p>
                <ol>
                    <li>
                        Sie sollen die serverseitige Erzeugung von HTML-Code vereinfachen
                    </li>
                    <li>
                        Sie sollen die Verarbeitung komplexer HTTP-Anfragen erm√∂glichen
                    </li>
                    <li>
                        Sie dienen als Vorlage f√ºr neue Webanwendungen
                    </li>
                </ol>

                <p>
                    5. Was ist das Post/Redirect/Get-Pattern?
                </p>
                <ol>
                    <li>
                        Eine spezielles Kontaktformular auf einer Firmenwebseite
                    </li>
                    <li>
                        Ein empfohlenes Vorgehen bei der Weiterentwicklung alter Servletklassen
                    </li>
                    <li>
                        Ein Schema, wie Formulareingaben sinnvoll behandelt werden k√∂nnen
                    </li>
                </ol>

                <p>
                    6. Welche Aufgabe hat der Session Kontext
                </p>
                <ol>
                    <li>
                        Daten im Browser zwischenspeichern, um sie sp√§ter an den Server zu schicken
                    </li>
                    <li>
                        Serverseitig je Benutzer bestimmte Daten √ºber mehrere Anfragen hinweg zwischenspeichern
                    </li>
                    <li>
                        Serverseitig √ºber alle Benutzer hinweg globale Daten zwischenspeichern
                    </li>
                </ol>

                <h2>Aufgabe 1.2: Wichtige Methoden</h2>

                <p>
                    1. Wie hei√üt die Methode eines Servlets, die auf alle HTTP-Anfragen reagiert?
                </p>
                <ol>
                    <li>
                        <code>doAll()</code>
                    </li>
                    <li>
                        <code>service()</code>
                    </li>
                    <li>
                        <code>handle()</code>
                    </li>
                </ol>

                <p>
                    2. Welche beiden Parameter bekommen die <code>do‚Ä¶</code>-Methoden eines Servlets √ºbergeben?
                </p>
                <ol>
                    <li>
                        Ein <code>HttpRequest</code>- und ein <code>HttpResponse</code>-Objekt
                    </li>
                    <li>
                        Zwei Datenstr√∂me zum Lesen und Schreiben der HTTP-Anfrage bzw. Antwort
                    </li>
                    <li>
                        Ein <code>HttpServletResponse</code>- und ein <code>HttpServletRequest</code>-Objekt
                    </li>
                    <li>
                        Ein <code>HttpServletRequest</code>- und ein <code>HttpServletResponse</code>-Objekt
                    </li>
                </ol>

                <p>
                    3. Mit welcher Methode kann die angefragte URL ermittelt werden?
                </p>
                <ol>
                    <li>
                        <code>request.getRequestURI()</code>
                    </li>
                    <li>
                        <code>response.getRequestURI()</code>
                    </li>
                    <li>
                        <code>this.getRequest().getURI()</code>
                    </li>
                </ol>

                <p>
                    4. Mit welchen Methoden kann der Statuscode der HTTP-Antwort gesetzt werden?
                </p>
                <ol>
                    <li>
                        <code>response.setStatus()</code>
                    </li>
                    <li>
                        <code>response.sendError()</code>
                    </li>
                    <li>
                        <code>response.setStatusCode()</code>
                    </li>
                    <li>
                        <code>response.getResponse().setStatus()</code>
                    </li>
                </ol>

                <p>
                    5. Mit welcher Methode erh√§lt man einen Datenstrom zum Schreiben des HTTP Response Body?
                </p>
                <ol>
                    <li>
                        <code>request.response.getWriter()</code>
                    </li>
                    <li>
                        <code>request.getInputStream()</code>
                    </li>
                    <li>
                        <code>response.setOutputStream()</code>
                    </li>
                    <li>
                        <code>response.getWriter()</code>
                    </li>
                    <li>
                        <code>response.getBodyStream()</code>
                    </li>
                </ol>

                <p>
                    6. Mit welcher Methode kann bekommt man Zugriff auf den Session Kontext?
                </p>
                <ol>
                    <li>
                        <code>this.getSessionContext()</code>
                    </li>
                    <li>
                        <code>this.getSession()</code>
                    </li>
                    <li>
                        <code>request.getSession()</code>
                    </li>
                    <li>
                        <code>request.session.get()</code>
                    </li>
                </ol>

                <hr />

                <p style="transform: scaleY(-1) scaleX(-1); display: inline-block;">
                    <small>
                        <b>L√∂sung:</b> Aufgabe 1.1: 3, 1+4, 2, 1, 3, 2. Aufgabe 1.2: 2, 4, 1, 1+2, 4, 3.
                    </small>
                </p>
            </article>
            <aside>
                <p>
                    Hast du dir bis hierhin alles gut merken k√∂nnen? Hier kommt Johny Kontrolletti,
                    um das zu √ºberpr√ºfen. üìã
                </p>
                <span style="font-size: 700%">
                    üï∫üèø
                </span>
            </aside>
        </section>

        <section>
            <h1>Weiterleitung an eine Java Server Page</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "jsp-einfach-netbeans-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#jsp-einfach-netbeans"
                                role          = "tab"
                                aria-controls = "jsp-einfach-netbeans"
                                aria-expanded = "true"
                            >
                                Netbeans-Projekt
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "jsp-einfach-servlet-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#jsp-einfach-servlet"
                                role          = "tab"
                                aria-controls = "jsp-einfach-servlet"
                                aria-expanded = "true"
                            >
                                Servlet
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "jsp-einfach-jsp-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#jsp-einfach-jsp"
                                role          = "tab"
                                aria-controls = "jsp-einfach-jsp"
                            >
                                Java Server Page
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "jsp-einfach-css-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#jsp-einfach-css"
                                role          = "tab"
                                aria-controls = "jsp-einfach-css"
                            >
                                Stylesheet
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "jsp-einfach-ergebnis-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#jsp-einfach-ergebnis"
                                role          = "tab"
                                aria-controls = "jsp-einfach-ergebnis"
                            >
                                Ergebnis
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Netbeans-Projekt -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "jsp-einfach-netbeans"
                            role            = "tabpanel"
                            aria-labelledby = "jsp-einfach-netbeans-tab"
                        >
                            <p>
                                So sieht das Netbeans-Projekt aus. Wenn du es nachbauen willst, musst du
                                exakt die Verzeichnisstruktur einhalten.
                            </p>
                            <img src="servlets_jsp_einfach_01.jpg" class="d-block" style="width: 100%" />
                        </div>
                        <!-- Servlet -->
                        <div
                            class           = "tab-pane fade show"
                            id              = "jsp-einfach-servlet"
                            role            = "tabpanel"
                            aria-labelledby = "jsp-einfach-servlet-tab"
                        >
                            <p>
                                Dies ist das Servlet, dass bei jeder <tt>GET</tt>- und <tt>POST</tt>-Anfrage durchlaufen wird.
                            </p>
                            <source-code language="java">
                                import java.io.IOException;
                                import java.text.DateFormat;
                                import java.text.SimpleDateFormat;
                                import java.util.Date;
                                import javax.servlet.RequestDispatcher;
                                import javax.servlet.ServletException;
                                import javax.servlet.annotation.WebServlet;
                                import javax.servlet.http.HttpServlet;
                                import javax.servlet.http.HttpServletRequest;
                                import javax.servlet.http.HttpServletResponse;
                                import javax.servlet.http.HttpSession;

                                /**
                                 * Dieses Servlet zeigt, wie die Erzeugung des HTML-Codes an eine Java Server
                                 * Page ausgelagert werden kann.
                                 */
                                @WebServlet(urlPatterns = {"/index.html"})
                                public class HalloServlet extends HttpServlet {

                                    @Override
                                    public void doGet(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        // Zwischenspeichern eines Wertes, den wir in der JSP anzeigen wollen
                                        // Die letzte Zeile ist die wichtige Zeile hier
                                        DateFormat dateFormat = new SimpleDateFormat("dd.MM.yyyy");
                                        Date date = new Date();
                                        String tagesdatum = dateFormat.format(date);

                                        request.setAttribute("tagesdatum", tagesdatum);

                                        // Anfrage an eine JSP weiterleiten, um damit den HTML-Code
                                        // der Seite zu generieren
                                        RequestDispatcher dispatcher = request.getRequestDispatcher("/WEB-INF/hallo.jsp");
                                        dispatcher.forward(request, response);

                                        // Werte im Session Kontext entfernen, damit wir beim n√§chsten mal
                                        // wieder von vorne anfangen
                                        HttpSession session = request.getSession();
                                        session.removeAttribute("vorname");
                                        session.removeAttribute("nachname");
                                    }

                                    @Override
                                    public void doPost(HttpServletRequest request, HttpServletResponse response)
                                    throws IOException, ServletException {
                                        // Eingegebene Werte auslesen
                                        String vorname = request.getParameter("vorname");
                                        String nachname = request.getParameter("nachname");

                                        // Werte im Session Kontext ablegen
                                        HttpSession session = request.getSession();
                                        session.setAttribute("vorname", vorname);
                                        session.setAttribute("nachname", nachname);

                                        // Und die Seite nochmal laden lassen
                                        response.sendRedirect(request.getRequestURI());
                                    }

                                }
                            </source-code>
                        </div>
                        <!-- Java Server Page -->
                        <div
                            class           = "tab-pane fade"
                            id              = "jsp-einfach-jsp"
                            role            = "tabpanel"
                            aria-labelledby = "jsp-einfach-jsp-tab"
                        >
                            <p>
                                Innerhalb des Servlets wird nun kein HTML-Code mehr erzeugt. Das macht die folgende JSP f√ºr uns. Die Datei muss <tt>WEB-INF/hallo.jsp</tt> hei√üen!
                            </p>
                            <source-code language="html">
                                &lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;
                                &lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
                                &lt;%@taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%&gt;

                                &lt;!DOCTYPE html&gt;
                                &lt;html&gt;
                                    &lt;head&gt;
                                        &lt;meta charset="utf-8" /&gt;
                                        &lt;title&gt;Hallo, Welt!&lt;/title&gt;
                                        &lt;link rel="stylesheet" href="style.css" /&gt;
                                    &lt;/head&gt;
                                    &lt;body&gt;
                                        &lt;div class="container"&gt;
                                            &lt;!-- Eingabefelder, nur vor dem Abschicken anzeigen --&gt;
                                            &lt;c:if test="${vorname == null}"&gt;
                                                &lt;h1&gt;Wie hei√üt du?&lt;/h1&gt;

                                                &lt;form method="POST"&gt;
                                                    &lt;input name="vorname" type="text" placeholder="Vorname" /&gt;
                                                    &lt;input name="nachname" type="text" placeholder="Nachname" /&gt;
                                                    &lt;input type="submit" value="Abschicken" /&gt;
                                                &lt;/form&gt;
                                            &lt;/c:if&gt;

                                            &lt;!-- Begr√º√üung, nur nach dem Abschicken anzeigen --&gt;
                                            &lt;c:if test="${vorname != null}"&gt;
                                                &lt;h1&gt;Hallo, ${vorname} ${nachname}!&lt;/h2&gt;
                                                &lt;h2&gt;Sei gegr√º√üt!&lt;/h2&gt;

                                                &lt;a href=""&gt;Nochmal&lt;/a&gt;
                                            &lt;/c:if&gt;

                                            &lt;!-- Aktuelles Datum immer anzeigen --&gt;
                                            &lt;p&gt;
                                                &lt;small&gt;
                                                    Heute ist der ${tagesdatum}.
                                                &lt;/small&gt;
                                            &lt;/p&gt;
                                        &lt;/div&gt;
                                    &lt;/body&gt;
                                &lt;/html&gt;
                            </source-code>
                        </div>
                        <!-- Stylesheet -->
                        <div
                            class           = "tab-pane fade"
                            id              = "jsp-einfach-css"
                            role            = "tabpanel"
                            aria-labelledby = "jsp-einfach-css-tab"
                        >
                        <p>
                            Dieses mal g√∂nnen wir uns auch ein Stylesheet, damit es ordentlich aussieht. Die Datei muss <tt>style.css</tt> hei√üen.
                        </p>
                        <source-code language="css">
                            html, body {
                                font-family: sans-serif;
                                font-size: 12pt;
                                height: 100%;

                                margin: 0;
                                padding: 0;
                            }

                            html {
                                background-image: url(https://picsum.photos/1024/?image=1067);
                                background-repeat: no-repeat;
                                background-position: center center;
                                background-size: cover;
                            }

                            body {
                                display: flex;
                                justify-content: center;
                                align-items: center;
                            }

                            .container {
                                background: rgba(255,255,255,0.8);
                                border-radius: 0.5em;
                                padding: 1em;
                                margin: 2em;
                            }

                            h1, h2 {
                                color: crimson;
                                text-shadow: 0 0 1px rgba(0,0,0,0.5);
                                margin: 0 0 0.5em 0;
                            }

                            h2 {
                                color: deepskyblue;
                            }

                            input[type="text"] {
                                display: block;
                                width: 25em;
                                box-sizing: border-box;
                                border: 1px solid grey;
                                margin-bottom: 0.5em;
                            }
                        </source-code>
                        </div>
                        <!-- Ergebnis -->
                        <div
                            class           = "tab-pane fade"
                            id              = "jsp-einfach-ergebnis"
                            role            = "tabpanel"
                            aria-labelledby = "jsp-einfach-ergebnis-tab"
                        >
                            <p>
                                Und so sieht die Anwendung aus, wenn sie fertig ist.
                            </p>
                            <img src="servlets_jsp_einfach_02.jpg" class="d-block" style="width: 100%; margin-bottom: 0.5em;" />
                            <img src="servlets_jsp_einfach_03.jpg" class="d-block" style="width: 100%;" />
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <h2>√Ñnderungen am Servlet</h2>
                <p>
                    Aufbauend auf dem vorherigen Beispiel siehst du hier, wie die Erzeugung des
                    HTML-Codes an eine Java Server Page ausgelagert werden kann. Am Servlet
                    √§ndert sich hierf√ºr nicht viel. Lediglich die ganzen Zeilen zum Senden des
                    HTML-Codes sind nun verschwunden und wurden doch folgenden Zweizeiler ersetzt:
                </p>
                <source-code language="java">
                    RequestDispatcher dispatcher = request.getRequestDispatcher("/WEB-INF/hallo.jsp");
                    dispatcher.forward(request, response);
                </source-code>
                <p>
                    Die Java Server Page liegt dabei im Verzeichnis <tt>/WEB-INF/</tt>, damit sie nicht
                    direkt im Browser aufgerufen werden kann. Denn sonst k√∂nnte der Anwender einfach die
                    URL <tt>/meine_app/hello.jsp</tt> eingeben und die Datei direkt aufrufen. Das wollen
                    wir hier aber nicht. Die JSP soll nur aus dem Servlet heraus aufrufbar sein. ü§∏üèΩ
                </p>
                <p>
                    Der Rest ist im Prinzip gleich geblieben. Okay, au√üer dass es jetzt zwei Eingabefelder
                    sind. Aber das sollte dir ja keine Probleme machen. ü§ì Ach, und au√üerdem legen wir in
                    <code>doGet()</code> einen Wert in den <b>Request Kontext</b>, um ihn sp√§ter in der JSP
                    (unserem Template) anzeigen zu k√∂nnen:
                </p>
                <source-code language="java">
                    String tagesdatum = ‚Ä¶
                    request.setAttribute("tagesdatum", tagesdatum);
                </source-code>
                <p>
                    Der Unterschied vom Request Kontext zum Session Kontext ist dabei lediglich, dass die Daten
                    nur f√ºr die Dauer der Anfrage selbst aufgehoben werden. Danach verschwinden sie einfach wieder. üóëÔ∏è
                    Bitte unterliege dabei nicht dem Irrglauben, du k√∂nntest nur Strings im Request oder Session
                    Kontext ablegen. Tats√§chlich kannst du jedes beliebige Objekt hinein schreiben. Also auch Arrays,
                    Listen, Maps und sonst alles, was Java so zu bieten hat.
                </p>

                <h2>Unsere neue Java Server Page</h2>
                <p>
                    Die Datei <tt>/WEB-INF/hallo.jsp</tt> √ºbernimmt hier die Aufgabe unseres HTML-Templates.
                    Deshalb sieht sie √ºberwiegend auch wie ganz normales HTML aus. Ein paar ungew√∂hnliche Zeilen
                    stechen dir dann aber sicher doch ins Auge. Zum Beispiel:
                </p>
                <source-code language="html">
                    &lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;
                    &lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
                    &lt;%@taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%&gt;
                </source-code>
                <p>
                    Die erste Zeile hast du im letzten Kapitel schon mal gesehen. Sie legt fest, dass wir hier
                    HTML-Code mit dem Zeichensatz <tt>UTF-8</tt> generieren. Die anderen beiden Zeilen sind neu.
                    Sie binden zwei sogenannte <b>Tag Libraries</b> ein, wodurch uns unter Anderem das neue Element
                    <code>&lt;c:if&gt;</code> zur Verf√ºgung steht. Dadurch bleibt uns der l√§stige Javacode in der
                    JSP erspart! üí∞
                </p>
                <p>
                    Nat√ºrlich gibt es noch mehr neue Tags. Aber diese kannst du ja bei Bedarf einfach nachschlagen.
                    Zum Beispiel <a href="http://openbook.rheinwerk-verlag.de/javainsel9/javainsel_23_007.htm" target="_blank">hier</a>
                    oder <a href="https://www.javatpoint.com/jstl" target="_blank">hier</a>
                    oder <a href="https://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm" target="_blank">hier</a>.
                </p>
                <p>
                    Am Beispiel mit der <code>if</code>-Abfrage siehst du dann noch etwas anderes Interessantes:
                    Die sogenannte <b>JSP Expression Language</b>. Es handelt sich dabei um all die Ausdr√ºcke,
                    die zwischen <code>${‚Ä¶}</code> stehen. Im einfachsten Fall werden damit nur die Werte aus dem
                    Request oder Session Kontext ausgegeben. Zum Beispiel so:
                </p>
                <ul>
                    <li>
                        <src-code language="html">${tagesdatem}</src-code>
                    </li>
                    <li>
                        <src-code language="html">${vorname}</src-code>
                    </li>
                    <li>
                        <src-code language="html">${nachname}</src-code>
                    </li>
                </ul>
                <p>
                    Es k√∂nnen aber auch komplexe Berechnungen ober Pr√ºfungen angestellt werden, wie eben beim <code>if</code>.
                    Der Ausdruck <code>${vorname == null}</code> gibt deshalb wie erwartet ein Boolean zur√ºck, dass wahr sein muss,
                    um den Inhalt zwischen <src-code language="html">&lt;c:if&gt;</src-code> und <src-code language="html">&lt;/c:if&gt;</src-code>
                    auszuf√ºhren.
                </p>

                <h2>Was noch alles geht</h2>
                <p>
                    Dies soll uns hier f√ºr einen ersten Einstieg in Servlets und JSP gen√ºgen. Immerhin hast du jetzt ein vollst√§ndiges Beispiel
                    zu dem Ablauf aus <a href="#2">Folie 2</a> gesehen.
                </p>
                <p>
                    Erinnerst du dich jetzt aber an das vorherige Kapitel zur√ºck, f√§llt dir sicher ein, dass wir dort schon gezeigt haben,
                    wie der <a href="../http/#10" target="_blank">allgemeine HTML-Code in eine eigene JSP verlagert werden kann</a>. Diese
                    M√∂glichlkeit besteht hier nat√ºrlich weiterhin. Wir wollten das Beispiel aber nicht noch komplizierter machen. üë∫
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(231, 221, 141)">
            <h1>Aufgabe 3: Formularpr√ºfungen erg√§nzen</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "aufgabe3-beschreibung-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#aufgabe3-beschreibung"
                                role          = "tab"
                                aria-controls = "aufgabe3-beschreibung"
                                aria-expanded = "true"
                            >
                                Beschreibung
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "aufgabe3-loesung-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#aufgabe3-loesung"
                                role          = "tab"
                                aria-controls = "aufgabe3-loesung"
                            >
                                L√∂sung
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Beschreibung -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "aufgabe3-beschreibung"
                            role            = "tabpanel"
                            aria-labelledby = "aufgabe3-beschreibung-tab"
                        >
                            <h2>Aufgabe</h2>
                            <p>
                                Kopiere den Quellcode aus der vorherigen Folie in ein neues Netbeansprojekt und
                                nimm folgende √Ñnderungen daran vor:
                            </p>
                            <ul>
                                <li>
                                    Wie immer, l√∂sche die von Netbeans automatisch erzeugte Datei <tt>index.html</tt>.
                                </li>
                                <li>
                                    Zun√§chst soll in <code>doPost()</code> gepr√ºft werden, ob beide Felder ausgef√ºllt wurden.
                                </li>
                                <li>
                                    Sind die Eingaben okay, soll die bekannte Best√§tigungsseite angezeigt werden.
                                </li>
                                <li>
                                    Fehlt eines der beiden Felder, soll das Formular mit einer Fehlermeldung stehen bleiben.
                                </li>
                                <li>
                                    Achte dabei darauf, dass die bisherigen Eingaben nicht verloren gehen!
                                </li>
                                <li>
                                    Eine Pr√ºfung mit JavaScript soll nicht erfolgen. Diese sparen wir uns hier. üôÇ
                                </li>
                            </ul>

                            <div class="container-fluid" style="margin-bottom: 1em;">
                                <div class="row">
                                    <div class="col-md-4">
                                        <img src="aufgabe3_01.jpg" class="d-block img-thumbnail" style="width: 100%" />
                                    </div>
                                    <div class="col-md-4">
                                        <img src="aufgabe3_02.jpg" class="d-block img-thumbnail" style="width: 100%" />
                                    </div>
                                    <div class="col-md-4">
                                        <img src="aufgabe3_03.jpg" class="d-block img-thumbnail" style="width: 100%" />
                                    </div>
                                </div>
                            </div>

                            <h2>Hinweise</h2>
                            <ul>
                                <li>
                                    Du musst ein Kennzeichen im Session Kontext ablegen, ob die Pr√ºfung erfolgreich war.
                                </li>
                                <li>
                                    Wird ein Wert nicht gefunden, liefert die Expression Language immer <code>null</code> zur√ºck.
                                </li>
                                <li>
                                    <p>
                                        Wenn du eine Liste mit Fehlermeldungen im Session Kontext hast, kannst du sie wie folgt ausgeben:
                                    </p>
                                    <source-code language="html">
                                        &lt;c:forEach items="${fehlermeldungen}" var="fehlermeldung"&gt;
                                            ${fehlermeldung}
                                        &lt;/c:forEach&gt;
                                    </source-code>
                                </li>
                            </ul>
                        </div>
                        <!-- L√∂sung -->
                        <div
                            class           = "tab-pane fade"
                            id              = "aufgabe3-loesung"
                            role            = "tabpanel"
                            aria-labelledby = "aufgabe3-loesung-tab"
                        >
                            <h2>doPost()-Methode im Servlet</h2>
                            <p>
                                Die neue <code>doPost()</code>-Methode sieht wie folgt aus. Neu hinzugekommen sind die
                                beiden Attribute <tt>fehlermeldungen</tt> und <tt>ergebnisAnzeigen</tt> im Session Kontext.
                            </p>
                            <source-code language="java">
                                @Override
                                public void doPost(HttpServletRequest request, HttpServletResponse response)
                                throws IOException, ServletException {
                                    // Eingegebene Werte auslesen
                                    List&lt;String&gt; fehlermeldungen = new ArrayList&lt;&gt;();

                                    String vorname = request.getParameter("vorname");
                                    String nachname = request.getParameter("nachname");

                                    if (vorname == null || vorname.isEmpty()) {
                                        fehlermeldungen.add("Gib erst einen Vornamen ein");
                                    }

                                    if (nachname == null || nachname.isEmpty()) {
                                        fehlermeldungen.add("Gib erst einen Nachnamen ein");
                                    }

                                    // Werte im Session Kontext ablegen
                                    HttpSession session = request.getSession();
                                    session.setAttribute("vorname", vorname);
                                    session.setAttribute("nachname", nachname);
                                    session.setAttribute("fehlermeldungen", fehlermeldungen);
                                    session.setAttribute("ergebnisAnzeigen", fehlermeldungen.isEmpty());

                                    // Und die Seite nochmal laden lassen
                                    response.sendRedirect(request.getRequestURI());
                                }
                            </source-code>

                            <h2>Java Server Page</h2>
                            <p>
                                Die Java Server Page muss wie folgt angepasst werden:
                            </p>
                            <source-code language="html">
                                &lt;!-- Eingabefelder, nur vor dem Abschicken anzeigen --&gt;
                                &lt;c:if test="${ergebnisAnzeigen != true}"&gt;
                                    &lt;h1&gt;Wie hei√üt du?&lt;/h1&gt;

                                    &lt;form method="POST"&gt;
                                        &lt;input name="vorname" type="text" placeholder="Vorname" value="${vorname}" /&gt;
                                        &lt;input name="nachname" type="text" placeholder="Nachname" value="${nachname}" /&gt;
                                        &lt;input type="submit" value="Abschicken" /&gt;
                                    &lt;/form&gt;

                                    &lt;ul class="error"&gt;
                                        &lt;c:forEach items="${fehlermeldungen}" var="fehlermeldung"&gt;
                                            &lt;li&gt;${fehlermeldung}&lt;/li&gt;
                                        &lt;/c:forEach&gt;
                                    &lt;/ul&gt;
                                &lt;/c:if&gt;

                                &lt;!-- Begr√º√üung, nur nach dem Abschicken anzeigen --&gt;
                                &lt;c:if test="${ergebnisAnzeigen == true}"&gt;
                                    ‚Ä¶
                                &lt;/c:if&gt;
                            </source-code>

                            <h2>Stylesheet</h2>
                            <p>
                                Im Stylesheet muss eine neue Klasse f√ºr Fehlermeldungen definiert werden:
                            </p>
                            <source-code language="css">
                                .error {
                                    color: red;
                                    font-weight: bold;
                                }
                            </source-code>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Zum Abschluss das Kapitels gibt es hier nochmal eine kleine Knobelaufgabe f√ºr dich.
                    Es geht darum, das eben gezeigte Beispiel um eine Eingabepr√ºfung zu erweitern. üì®
                </p>
                <img src="../../github_atom.png" class="img-fluid d-block"/>
                <p>
                    <small>
                        Bildnachweis:
                        <a href="https://atom.io/" target="_blank">Atom Webseite</a>
                    </small>
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(158, 203, 231)">
            <h1>Rechtshinweise</h1>
            <article>
                <h4>Creative Commons Namensnennung 4.0 International</h4>
                <ul>
                    <li>Beliebiges Teilen ist erlaubt</li>
                    <li>Die Unterlagen d√ºrfen bearbeitet und ver√§ndert werden</li>
                    <li>Wenn die Namens- und Urheberangaben erhalten bleiben</li>
                    <li>Und keine weiteren Einschr√§nkungen auferlegt werden</li>
                </ul>
                <span style="font-size: 400px; color: white;" class="dhbw-text-shadow" >¬ß</span>
            </article>
            <aside style="font-size: 80%">
                <h4>Kontaktdaten</h4>
                <p>
                    Dennis Schulmeister-Zimolong<br/>
                    E-Mail: dhbw@windows3.de<br/>
                </p>

                <h4>Urheberrecht und Lizenzvereinbarung</h4>
                <p>
                    ¬© 2017 Dennis Schulmeister-Zimolong <br/>
                    <a href="https://github.com/DennisSchulmeister/dhbwka-wwi-webprog-folien" target="_blank">https://github.com/DennisSchulmeister/dhbwka-wwi-webprog-folien</a>
                </p>
                <img src="https://i.creativecommons.org/l/by/4.0/88x31.png" alt="Creative Commons Lizenzvertrag" />
                <p>
                    Das Werk <i>Vorlesung "Webprogrammierung" im Studiengang Wirtschaftsinformatik
                    an der DHBW Karlsruhe</i> von <a href="http://www.windows3.de" target="_blank">Dennis Schulmeister-Zimolong</a>
                    ist lizenziert unter <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank"><i>Creative Commons
                    Namensnennung 4.0 International</i></a>.
                </p>
                <p>
                    Du darfst:
                </p>
                <ul>
                    <li>
                        <b>Teilen</b> ‚Äî das Material in jedwedem Format oder Medium vervielf√§ltigen
                        und weiterverbreiten
                    </li>
                    <li>
                        <b>Bearbeiten</b> ‚Äî das Material remixen, ver√§ndern und darauf aufbauen
                        und zwar f√ºr beliebige Zwecke, sogar kommerziell.
                    </li>
                </ul>
                <p>
                    Unter folgenden Bedingungen:
                </p>
                <ul>
                    <li>
                        <b>Namensnennung</b> ‚Äî Du musst angemessene Urheber- und Rechteangaben
                        machen, einen Link zur Lizenz beif√ºgen und angeben, ob √Ñnderungen
                        vorgenommen wurden. Diese Angaben d√ºrfen in jeder angemessenen Art
                        und Weise gemacht werden, allerdings nicht so, dass der Eindruck
                        entsteht, der Lizenzgeber unterst√ºtze gerade dich oder deine Nutzung
                        besonders.
                    </li>
                    <li>
                        <b>Keine weiteren Einschr√§nkungen</b> ‚Äî Du darfst keine zus√§tzlichen Klauseln
                        oder technische Verfahren einsetzen, die anderen rechtlich irgendetwas
                        untersagen, was die Lizenz erlaubt.
                    </li>
                </ul>
                <p>
                    Es werden keine Garantien gegeben und auch keine Gew√§hr geleistet.
                    Die Lizenz verschafft dir m√∂glicherweise nicht alle Erlaubnisse,
                    die du f√ºr die jeweilige Nutzung brauchst. Es k√∂nnen beispielsweise
                    andere Rechte wie Pers√∂nlichkeits- und Datenschutzrechte zu beachten
                    sein, die deine Nutzung des Materials entsprechend beschr√§nken.
                </p>
            </aside>
        </section>
    </body>
</html>
